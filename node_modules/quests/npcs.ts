let c2 = Bukkit.getPluginManager().getPlugin('Citizens');
if (!c2) throw new Error('Citizens2 is not loaded. Quests will not be enabled.');
let npcRegistry = c2.getRegistry();
let npcSpeech = c2.getSpeechFactory();

export class NpcFactory {
    /**
     * An object of { npcID: questUUID[] }
     */
    private _registeredNpcs: any = {};

    constructor() {
        this._registeredNpcs = {};
    }

    getQuestsFor(uuid: string): string[] {
        return this._registeredNpcs[uuid] as string[];
    }

    getNpcByUUID(uuid: string) {
        return npcRegistry.getByUniqueId(uuid);
    }

    getNpc(entity) {
        return npcRegistry.getNPC(entity);
    }

    createNpc(type, name, quests?: string[]) {
        let npc = npcRegistry.createNPC(type, name);
        this._registeredNpcs[npc.getUniqueId()] = quests || [];
    }

    addQuest(npcUUID: string, questUUID: string) {
        if (!this._registeredNpcs[npcUUID]) this._registeredNpcs[npcUUID] = [];
    }
}

