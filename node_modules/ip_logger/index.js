var pf = require('pf');
var spigot = require('spigot');

function getPlayersIps(player) {
    player = spigot.utils.getPlayer(player) || spigot.utils.getOfflinePlayer(player);
    var profile = pf.getProfile(player);
    return profile.get('ip_logger', 'ips');
}

registerEvent('player', 'join', function(e) {
    var profile = pf.getProfile(e.getPlayer());
    profile.get('ip_logger', 'ips').push(e.getPlayer().getAddress().toString());
    profile.save();
});

module.exports = {
    getPlayersIps
}